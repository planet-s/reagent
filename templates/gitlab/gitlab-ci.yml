# Section generated by <reagent>

image: rustlang/rust:nightly

format:
    script:
        - rustup component add rustfmt
        - cargo fmt --all -- --check

linux:
    script:
        - cargo build
        - cargo test

linux:stable:
    image: rust:latest
    script:
        - cargo build
        - cargo test

{{#redox}}
redox:
    variables:
        CC: "x86_64-unknown-redox-gcc"
    script:
        - apt-get update -qq
        - apt-get install -qq tar
        - wget -O - https://static.redox-os.org/toolchain/x86_64-unknown-redox/relibc-install.tar.gz |
          tar --extract --gzip --directory /usr/local
        - rustup default nightly-2018-11-07
        - rustup target add x86_64-unknown-redox
        - cargo build --target x86_64-unknown-redox

{{/redox}}

# </reagent>
